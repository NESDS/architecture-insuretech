# InsureTech ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ü–û (–°–ø—Ä–∏–Ω—Ç 8)

–ü—Ä–æ–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –∫—É—Ä—Å—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ü–û. –†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã —Å—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ InsureTech.

## –û –∫–æ–º–ø–∞–Ω–∏–∏ InsureTech

**InsureTech** ‚Äî –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —É—Å–ª—É–≥ –¥–ª—è —á–∞—Å—Ç–Ω—ã—Ö –∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤:
- B2C: —Å–∞–π—Ç –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Å—Ç—Ä–∞—Ö–æ–≤–æ–∫
- B2B: API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö —É—Å–ª—É–≥ –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º—ã MVP:**
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ (50 RPS –ø–æ–∏—Å–∫, 10 RPS –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ)
- –ù–∞—Ä—É—à–µ–Ω–∏–µ SLA –¥–ª—è B2B-–∫–ª–∏–µ–Ω—Ç–æ–≤ (–æ–¥–∏–Ω –ø–∞—Ä—Ç–Ω—ë—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 250 RPS –≤–º–µ—Å—Ç–æ 20)
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (500 —Ç—ã—Å. —Ä—É–±./—á–∞—Å —É–±—ã—Ç–∫–æ–≤)

---

## –ó–∞–¥–∞–Ω–∏—è

### Task1 ‚Äî –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (to-be)

**–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å 99.9%, RTO 45 –º–∏–Ω, RPO 15 –º–∏–Ω

**–†–µ—à–µ–Ω–∏—è:**
- 2 –∑–æ–Ω—ã –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (Active-Active)
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä—ã –≤ –∫–∞–∂–¥–æ–π –∑–æ–Ω–µ
- Application Load Balancer (L7) –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏
- PostgreSQL HA —Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π
- CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

üìÅ `InsureTech_—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è_–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞_to-be.drawio`

---

### Task2 ‚Äî –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¶–µ–ª—å:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–≤ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ

**–†–µ—à–µ–Ω–∏—è:**
- Kubernetes Deployment + Service (NodePort)
- HPA (Horizontal Pod Autoscaler) –ø–æ –ø–∞–º—è—Ç–∏ (–ø–æ—Ä–æ–≥ 80%)
- –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Locust

üìÅ `deployment.yaml`, `service.yaml`, `hpa.yaml`, `locustfile.py`

---

### Task3 ‚Äî Event-Driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–¶–µ–ª—å:** –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ polling –∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å

**–†–µ—à–µ–Ω–∏—è:**
- Apache Kafka –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- –¢–æ–ø–∏–∫–∏: `products-updated`, `insurance-issued`
- Transactional Outbox + Debezium CDC

üìÅ `diagram_event_driven.drawio`

---

### Task4 ‚Äî –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –û–°–ê–ì–û

**–¶–µ–ª—å:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –û–°–ê–ì–û –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–¥–æ 60 —Å–µ–∫, 2500 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**–†–µ—à–µ–Ω–∏—è:**
- –ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å `osago-aggregator` —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –ë–î
- REST (–∑–∞—è–≤–∫–∞) + Kafka (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è) –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- WebSocket –¥–ª—è push –≤ –±—Ä–∞—É–∑–µ—Ä
- –ü–∞—Ç—Ç–µ—Ä–Ω—ã: Timeout, Retry, Circuit Breaker, Rate Limiter

üìÅ `diagram_osago.drawio`

---

### Task5 ‚Äî GraphQL API

**–¶–µ–ª—å:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API —Å–µ—Ä–≤–∏—Å–∞ client-info (500 –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞)

**–†–µ—à–µ–Ω–∏—è:**
- –ü–µ—Ä–µ–≤–æ–¥ REST ‚Üí GraphQL
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã: Client ‚Üí documents, relatives
- –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –≤–º–µ—Å—Ç–æ —Ç—Ä—ë—Ö

üìÅ `schema.graphql`

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
architecture-insuretech/
‚îú‚îÄ‚îÄ Task1/
‚îÇ   ‚îú‚îÄ‚îÄ InsureTech_—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è_–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞_to-be.drawio
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ Task2/
‚îÇ   ‚îú‚îÄ‚îÄ deployment.yaml
‚îÇ   ‚îú‚îÄ‚îÄ service.yaml
‚îÇ   ‚îú‚îÄ‚îÄ hpa.yaml
‚îÇ   ‚îú‚îÄ‚îÄ locustfile.py
‚îÇ   ‚îú‚îÄ‚îÄ *.png (—Å–∫—Ä–∏–Ω—à–æ—Ç—ã)
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ Task3/
‚îÇ   ‚îú‚îÄ‚îÄ diagram_event_driven.drawio
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ Task4/
‚îÇ   ‚îú‚îÄ‚îÄ diagram_osago.drawio
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ Task5/
‚îÇ   ‚îú‚îÄ‚îÄ schema.graphql
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ README.md
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
|-----------|------------|
| –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | Yandex Cloud, Kubernetes, Docker |
| –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ | Application Load Balancer (L7), CDN |
| –ë–î | PostgreSQL HA (Patroni) |
| Messaging | Apache Kafka, Debezium CDC |
| API | REST, GraphQL, WebSocket |
| –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | Locust |

